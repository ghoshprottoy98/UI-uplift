<nav class="flex flex-col h-full shadow-left">
  <div class="flex items-center items-start">
    <div class="flex">
      <app-sidebar-toggler></app-sidebar-toggler>
    </div>
    <div class="flex" *ngIf="!(isCollapsed$ | async)">
      <a href="https://www.bracits.com" target="_blank">
        <img
          [ngSrc]="'./assets/media/logos/bracit-logo.svg'"
          [width]="100"
          [height]="100"
          alt="BRAC IT Services"
        />
      </a>
    </div>
  </div>

  <div class="flex-grow overflow-y-auto">
    <ul class="mt-4 px-4">
      <li *ngFor="let item of menuItems" class="mb-3">
        <a
          [routerLink]="item.href"
          class="flex items-center text-sm whitespace-nowrap rounded h-10"
          [ngClass]="{
            'bg-primary text-white font-bold p-2': selectedLabel === item.title,
            'text-dark hover:bg-primary hover:cursor-pointer hover:text-white hover:font-bold hover:p-2': selectedLabel !== item.title
          }"
          (click)="selectItem(item.title, item.href); toggleSubmenu(item.title)"
        >
          <i class="{{ item.icon }}" class="mr-2"></i>
          <span *ngIf="!(isCollapsed$ | async)">{{ item.title }}</span>
          <span *ngIf="item.submenu?.length" class="ml-auto">
            <i class="fas" [ngClass]="{'fa-chevron-down': isSubmenuOpen(item.title), 'fa-chevron-up': !isSubmenuOpen(item.title)}"></i>
          </span>
        </a>

        <ul *ngIf="isSubmenuOpen(item.title)" class="ml-4 mt-2 pl-4">
          <li *ngFor="let subItem of item.submenu" class="mb-1">
            <a 
              [routerLink]="subItem.href"
              class="flex items-center text-sm whitespace-nowrap rounded h-10"
              [ngClass]="{
                'bg-primary text-white font-bold p-2': isSubmenuActive(subItem.href),
                'text-dark hover:bg-primary hover:cursor-pointer hover:text-white hover:font-bold hover:p-2': !isSubmenuActive(subItem.href)
              }"
            >
              <i class="{{ subItem.icon }}" class="mr-2"></i>
              <span>{{ subItem.title }}</span>
            </a>
          </li>
        </ul>
      </li>
    </ul>
  </div>
</nav>
