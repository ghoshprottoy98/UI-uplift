<nav class="flex flex-col h-full shadow-left">
  <div class="flex items-center items-start">
    <div class="flex">
      <app-sidebar-toggler></app-sidebar-toggler>
    </div>
    <div class="flex">
      <a href="https://www.bracits.com" target="_blank">
        <img
          [ngSrc]="'./assets/media/logos/bracit-logo.svg'"
          [width]="100"
          [height]="100"
          alt="BRAC IT Services"
        />
      </a>
    </div>
  </div>

  <div class="flex-grow overflow-y-auto">
    <ul class="mt-4 px-4">
      <li *ngFor="let item of menuItems" class="mb-3">
        <a
          [routerLink]="item.route"
          class="flex items-center text-sm whitespace-nowrap rounded h-10"
          [ngClass]="{
            'bg-[#f45c5c] text-white font-bold py-2': selectedLabel === item.label,
            'text-[#0c2c54] hover:bg-[#f45c5c] hover:cursor-pointer hover:text-white hover:font-bold': selectedLabel !== item.label
          }"
          (click)="selectItem(item.label); toggleSubmenu(item.label)"
        >
          <span *ngIf="!(isCollapsed$ | async)">{{ item.label }}</span>
          <!-- Submenu Toggle Button (Triangle Icon) -->
          <span *ngIf="item.submenu?.length" class="ml-auto">
            <i class="fas" [ngClass]="{'fa-chevron-down': isSubmenuOpen(item.label), 'fa-chevron-up': !isSubmenuOpen(item.label)}"></i>
          </span>
        </a>

        <!-- Submenu for items with nested routes -->
        <ul *ngIf="isSubmenuOpen(item.label)" class="ml-4 mt-2 pl-4">
          <li *ngFor="let subItem of item.submenu">
            <a 
              [routerLink]="subItem.route"
              class="flex items-center text-sm whitespace-nowrap rounded h-10"
              [ngClass]="{
                'bg-[#f45c5c] text-white font-bold': isSubmenuActive(subItem.route),
                'text-[#0c2c54] hover:bg-[#f45c5c] hover:cursor-pointer hover:text-white hover:font-bold': !isSubmenuActive(subItem.route)
              }"
            >
              <span *ngIf="!(isCollapsed$ | async)" class="ml-2">{{ subItem.label }}</span>
            </a>
          </li>
        </ul>
      </li>
    </ul>
  </div>
</nav>
